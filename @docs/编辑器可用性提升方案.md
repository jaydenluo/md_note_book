以下是编辑器功能增强列表，按实现难度从易到难排序：


##  **基础格式工具栏**
   - 加粗、斜体、下划线、删除线等基本文本格式
   - 标题级别（H1-H6）
   - 对齐方式（左、中、右对齐）
   - 列表（有序、无序）

##  **大纲功能**
   - 显示笔记大纲
   - 点击大快速定位
   - 大纲折叠
   

##  **标题小H提示与折叠功能**
  - 显示标题是H1~H6的小H提示
  - 折叠标题,并能持久化保存，通过给标题增加一个属性data-folded="true"折叠功能,级下级节点增加 hidden-by-fold="true"，实隐藏。

## **代码块支持**
   
   ### 功能需求分析
   - 当前项目使用TipTap编辑器框架
   - 已有基本的代码块功能，但需要增强用户体验
   - 需要支持多种编程语言的语法高亮
   - 需要添加行号显示功能
   - 需要添加代码复制按钮 右上角小图标
   - 需要支持Markdown语法快速创建代码块
   - 需要支持代码块内容折叠功能
   - 需要支持代码块可拖动调整大小
   - 需要支持代码块内容区域可滚动

   ### 子任务列表
   
   #### 4.1 基础代码块功能实现
   - 实现基础代码块插入功能
     - 技术要点：使用TipTap的CodeBlock扩展，基于StarterKit中已包含的基础代码块功能
     - 实现自定义CodeBlock节点渲染，支持更多交互功能
   
   - 添加代码块工具栏按钮
     - 技术要点：创建自定义按钮组件，集成到编辑器工具栏
     - 使用Tiptap的commands API添加代码块插入命令
   
   - 实现代码块样式定制
     - 技术要点：使用Tailwind CSS定制代码块样式，支持深色/浅色模式
     - 创建可复用的代码块组件，便于统一样式管理

   #### 4.2 语法高亮支持
   - 集成highlight.js库
     - 技术要点：使用TipTap的extension-code-block-lowlight扩展
     - 配置按需加载语言包，减小打包体积
   
   - 实现常见编程语言的语法高亮
     - 技术要点：配置highlight.js支持常用语言
     - 实现语言自动检测功能
     - 支持语言：JavaScript, TypeScript, Python, Java, C/C++, C#, PHP, Go, Rust, Swift, Kotlin, Ruby, HTML, CSS, SQL, Markdown, JSON, YAML, XML, Bash, PowerShell
   
   - 添加语言选择下拉菜单
     - 技术要点：创建自定义下拉菜单组件，更新代码块语言属性
     - 使用Tiptap的updateAttributes命令修改代码块语言

   #### 4.3 行号显示功能
   - 实现代码块行号显示
     - 技术要点：扩展CodeBlock渲染器，添加行号显示
     - 使用CSS计数器或自定义渲染实现行号显示
   
   - 添加行号显示切换选项
     - 技术要点：添加切换按钮，通过自定义属性控制行号显示
     - 实现行号显示状态的持久化存储
   
   - 优化行号与代码的对齐
     - 技术要点：使用CSS Grid或Flexbox确保行号与代码正确对齐
     - 处理长行和换行情况下的行号对齐问题

   #### 4.4 代码复制功能
   - 添加代码块复制按钮
     - 技术要点：创建悬浮复制按钮，使用Clipboard API
     - 集成到代码块组件中，位于右上角
   
   - 实现复制成功反馈提示
     - 技术要点：使用Tippy.js或自定义Toast组件显示反馈
     - 添加复制动画效果提升用户体验
   
   - 优化复制按钮的显示逻辑
     - 技术要点：实现鼠标悬停时显示复制按钮
     - 使用CSS过渡效果实现平滑显示/隐藏

   #### 4.6 代码块高级交互功能
   - 实现代码块内容折叠功能
     - 技术要点：扩展CodeBlock节点，添加折叠状态属性
     - 添加折叠/展开按钮，通过CSS控制内容显示状态
     - 使用Tiptap的NodeView实现自定义交互
     - 保存折叠状态，实现持久化
   
   - 实现代码块可拖动调整高度
     - 技术要点：使用ResizeObserver API或拖拽事件实现高度调整
     - 添加拖动手柄，类似Tiptap的DragHandle扩展实现
     - 保存自定义大小到节点属性中
     - 处理拖拽过程中的性能优化和边界限制
   
   - 实现代码块内容区域可滚动
     - 技术要点：设置最大高度和overflow属性，添加自定义滚动条样式
     - 使用CSS变量控制最大高度，便于动态调整
     - 优化滚动条样式，提升用户体验
     - 确保滚动不影响编辑体验


## **引用块和分隔线**
   - 引用文本块样式
   - 水平分隔线插入
   - 
工具栏增加 普通模式与宽屏模式切换按钮 普通模式是800px 宽屏模式是占满屏
##  **图片插入与管理** 

使用 Tiptap 的 Image 扩展作为基础，但需要自定义扩展来支持更多功能
创建独立的图片工具栏组件，只在选中图片时显示
使用 CSS Modules 或 Tailwind 来处理图片样式
- 
   - 本地图片上传 图片上传（粘贴、选择文件） 上传多张图片，插手图片时默认是800PX
   - 图片大小调整  支持图片左对齐、居中、右对齐等多种排版方式  支持懒加载，提升编辑器性能
   - 图片说明文本 图片下方可输入标题文
   - 选中图片时显示图片工具栏，不选中时不显示
   - 图片工具栏要有个工具 可快速切换图片大小，大中小三档，按一下切换一下
   - 图片手入扣默认有边框与阴影，要适应亮色模式与暗色模式

图片上传优化：
使用 Web Workers 处理图片压缩
添加图片预览功能
支持拖拽排序
批量上传进度条
性能优化：
图片懒加载实现
图片预加载策略
使用 WebP 格式优化图片大小
UI/UX 改进：
图片上传时显示占位图
添加图片编辑快捷键
支持图片拖拽调整大小
图片加载失败时显示默认图片
任务优先级和复杂度分析：
优先级从高到低：
基础图片上传功能（复杂度：中）
实现粘贴上传
文件选择上传
默认宽度设置
图片工具栏（复杂度：低）
大小切换
对齐方式
边框阴影控制
图片说明文本（复杂度：低）
支持图片标题输入
标题样式适配
图片边框和阴影效果要考虑深色模式

工具栏的位置 要放在图片上方 调整图片大小的放到一个按钮，循环切换，边款与阴影放到一个按钮，默认选中


##  **表格支持**
   - 插入简单表格
   - 表格行列编辑
   - 表格样式调整
   - 
集成 Tiptap Table 扩展
提供“插入表格”按钮 弹出选择行列数的面板 默认插入3x5表格
保持表格节点的数据结构与编辑器状态同步，便于后续扩展
行/列的插入、删除、移动等操作的实现
样式数据可存储在表格节点的 attrs 中，便于序列化

##  **链接功能**
   - 添加超链接
   - 内部笔记链接（双向链接）

##  **任务列表**
   - 可勾选的任务项
   - 任务完成状态管理

##  **自动保存与历史版本**
   - 定时自动保存
   - 编辑历史查看
   - 版本回滚